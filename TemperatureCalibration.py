import numpy as np

def cal_M2P1(resistance):
    if resistance > 11890:
        return np.nan
    if resistance < 1331:
        return np.nan
    x = 8 - np.log(resistance - 400)
    t = np.exp(
        - 1.36523041244599
        + 2.18538144850699 * x
        + 0.3006689564873 * x ** 2
        - 0.236798546561119 * x ** 3
        + 0.654414663825489 * x ** 4
        + 1.76863109307351 * x ** 5
        - 1.90949565303511 * x ** 6
        - 4.86791759424962 * x ** 7
        + 1.73893702074905 * x ** 8
        + 6.54080381111495 * x ** 9
        + 0.367550662040525 * x ** 10
        - 4.08155846235602 * x ** 11
        - 1.1694083379502 * x ** 12
        + 0.958208929224962 * x ** 13
        + 0.407946081526613 * x ** 14)

    if t < 0.0234 or t > 6.9:
        return np.nan
    return t